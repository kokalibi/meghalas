<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <title>Maximális vízmennyiség + Oszlopdiagram</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background-color: #f9f9f9;
    }
    input, button {
      padding: 10px;
      font-size: 16px;
      margin-top: 10px;
    }
    #result {
      margin-top: 20px;
      font-size: 18px;
      color: green;
    }
    canvas {
      margin-top: 30px;
      max-width: 100%;
    }
  </style>
</head>
<body>

  <h2>Maximális vízmennyiség kiszámítása + Oszlopdiagram</h2>
  <label for="heightsInput">Add meg a magasságokat (pl. 1,8,6,2,5,4,8,3,7):</label><br>
  <input type="text" id="heightsInput">
  <br>
  <button onclick="calculateAndDraw()">Számítás és diagram</button>

  <div id="result"></div>
  <canvas id="chartCanvas" width="600" height="400"></canvas>

  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <script>
    let chart; // Globális változó a diagramhoz

    function calculateAndDraw() {
      const input = document.getElementById('heightsInput').value;
      const height = input.split(',').map(Number);

      // Ellenőrzés
      if (height.length < 2 || height.some(h => isNaN(h))) {
        document.getElementById('result').textContent = 'Hibás bemenet! Adj meg legalább 2 számot, vesszővel elválasztva.';
        return;
      }

      // Max vízmennyiség számítás
      let left = 0, right = height.length - 1, maxArea = 0;
      while (left < right) {
        const width = right - left;
        const minHeight = Math.min(height[left], height[right]);
        const area = width * minHeight;
        maxArea = Math.max(maxArea, area);
        if (height[left] < height[right]) left++;
        else right--;
      }

      document.getElementById('result').textContent = `Maximális vízmennyiség: ${maxArea}`;

      // Diagram kirajzolása
      const labels = height.map((_, i) => `x=${i}`);

      if (chart) chart.destroy(); // Előző diagram törlése

      const ctx = document.getElementById('chartCanvas').getContext('2d');
      chart = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: labels,
          datasets: [{
            label: 'Magasságok',
            data: height,
            backgroundColor: 'rgba(54, 162, 235, 0.7)',
            borderColor: 'rgba(54, 162, 235, 1)',
            borderWidth: 1
          }]
        },
        options: {
          scales: {
            x: {
              title: {
                display: true,
                text: 'Index (x tengely)'
              }
            },
            y: {
              beginAtZero: true,
              title: {
                display: true,
                text: 'Magasság'
              }
            }
          }
        }
      });
    }
  </script>

</body>
</html>
